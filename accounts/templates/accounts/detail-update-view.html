{% extends "base.html" %}
{% load crispy_forms_tags %} 

{% block content %}

<head>
<style type="text/css">

.change-ava{
  min-width:155px;
}


#trigger {
    visibility: hidden; 
    display: none; 
  } 

</style>
</head>



{% if request.session.language == 'RU' %}
 <input type="hidden" id='language' name="language" value='RU'>
  
    <div class="container-fluid">

  <div class="row">
    
    <div hidden class='col-5 col-md-2 custom-box' id='slider' style="background-color: rgb(255,255,255); overflow: scroll; ">
      {% include "sidebar.html" %}
    </div>

  <div class="col-xs-12 col-md-7 mx-auto">

  {% if title %}
  <p class="lead" style='font-size: 30px;'>{{ title }}</p>
  {% endif %}

<form action="" method="POST" role="form" enctype='multipart/form-data'>
  {% csrf_token %}
  {{ form|crispy }}
    <a href='{% url "password_change" %}' class="btn btn-outline-dark" role="button" aria-pressed="true">Изменить пароль</a>
    <button type="submit" class="mt-3 btn btn-dark btn-lg btn-block">Сохранить</button>
    <a href='{% url "logout" %}' class="mt-3 btn btn-outline-danger btn-lg btn-block" role="button" aria-pressed="true">Выйти</a>
</form>
            


  </div>
  </div>

  </div>
{% else %}
<input type="hidden" id='language' name="language" value='EN'>

  <div class="container-fluid">

  <div class="row">
    
    <div hidden class='col-5 col-md-2 custom-box' id='slider' style="background-color: rgb(255,255,255); overflow: scroll; ">
      {% include "sidebar.html" %}
    </div>

  <div class="col-xs-12 col-md-7 mx-auto">

  {% if title %}
  <p class="lead" style='font-size: 30px;'>{{ title }}</p>
  {% endif %}

<form action="" method="POST" role="form" enctype='multipart/form-data'>
  {% csrf_token %}
  {{ form|crispy }}
    <a href='{% url "password_change" %}' class="btn btn-outline-dark" role="button" aria-pressed="true">Change password</a>
    <button type="submit" class="mt-3 btn btn-dark btn-lg btn-block">Save</button>
    <a href='{% url "logout" %}' class="mt-3 btn btn-outline-danger btn-lg btn-block" role="button" aria-pressed="true">Logout</a>
  
</form>
            


  </div>
  </div>

  </div>
{% endif %}

<script>
  var currentPath = window.location.href
  if (currentPath.indexOf("details") != -1){

      var languageOption = $('#language').val()
      var avatar = $('.avatar-upload-button')
      avatar.hide()
      if (languageOption=='RU'){
        avatar.parent().prepend('<label for="avatar_custom" class="btn btn-outline-dark m-0 change-ava">Обновить</label>')
        }//if rus
      else {
        avatar.parent().prepend('<label for="avatar_custom" class="btn btn-outline-dark m-0 change-ava">Change picture</label>')
        }//if not rus

      $(".avatar-upload-button").change(function (){
          var fieldVal = event.target.files[0].name;
          if (fieldVal != undefined || fieldVal != ""){
            if ($(".filepath")[0]) {
              $(".filepath").text(fieldVal);
            }
            else{
              avatar.parent().append("<small><span class='filepath'>" + fieldVal + "</span></small>")
            }
          }
        });
  };

</script>

{% endblock %}



