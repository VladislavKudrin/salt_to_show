{% url 'home' as home_url %}
{% url 'contact' as contact_url %}
{% url 'products:list' as product_list_url %}
{% url 'login' as login_url %}
{% url 'logout' as logout_url %}
{% url 'register' as register_url %}
{% url 'carts:home' as cart_url %}
{% url 'accounts:home' as account_url %}
{% url 'products:create' as products_create_url %}
{% url 'accounts:wish-list' as wish_list %}
{% url 'categories:filter' as filter_url %}

{% load static %}
  
<nav class="navbar sticky-top navbar-expand-md navbar-light bg-white pb-1">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                {% include 'search/snippets/search-form.html' %}
            </li>
        </ul>
    </div>

    <div class="mx-auto order-0">
        <a class="navbar-brand mx-auto" href="{% url 'home' %}">Envision</a>
      
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>

    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
        <ul class="navbar-nav ml-auto">
          
         
   
      
         <li class="nav-item mr-2  {% if request.path == product_list_url %}active{% endif %}" >
        <a class="btn btn-dark" role="button" href="{{ product_list_url }}">Buy</a>
        </li>

        <li class="nav-item ml-0 {% if request.path == products_create_url %}active{% endif %}" style="justify-content: flex-end;">
          <a class="btn btn-light" role="button" href="{{ products_create_url }}">Sell</a>          
        </li>



        <li class="nav-item m-0 pb-0">
        <a class="nav-link m-0 pb-0" href="{{ wish_list }}">

        <span class='navbar-wish-count'>{{ request.user.wishes.all.count  }}</span>
        <i class="fas fa-heart fa-2x"></i>
        </a>
        </li>

        {% if request.user.is_authenticated %}
        <li class="nav-item dropdown ml-0 mr-0">
           <!--  <a class="nav-link dropdown-toggle mb-0 pb-0" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="far fa-user fa-2x"></i></a> -->
            {% if request.user.profile_foto %}
            <a class="nav-link dropdown-toggle m-0 p-0" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="{{ request.user.profile_foto.url }}"  class="img-thumbnail" alt="..." style="width:40px; height: 40px"></a>
            {% else %}
            <a class="nav-link dropdown-toggle mb-0 pb-0" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="far fa-user fa-2x"></i></a>
            {% endif %}
          
          
          <div class="dropdown-menu dropdown-menu-right text-center" aria-labelledby="navbarDropdown">
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href="{{ request.user.get_absolute_url }}">Home</a>
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href="{% url 'home' %}dialogs/">Chat</a>
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href='{% url "products:user-list" %}'>My items</a>
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href='{% url "accounts:history-product" %}'>History</a>
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href='{% url "accounts:wish-list" %}'>Wishlist</a>
            <a class="dropdown-item {% if request.path == account_url %}active{% endif %}" href='{% url "accounts:user-update" %}'>Settings</a>
          </div>
        </li>

        {% else %}
        <li class="nav-item {% if request.path == login_url %}active{% endif %}">
        <a class="nav-link" href="{{ login_url }}">Login/Sign Up</a>
        </li>
  
      {% endif %}



</ul>
</div>
</nav>
