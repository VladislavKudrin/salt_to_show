{% extends "base_no_footer.html" %}
{% load static %}
{% load sass_tags %}
{% load for_loop_extras %}

<link href="{% static 'css/main.css' %}" rel="stylesheet" type="text/css">


{% block content %}

<head>

<script src="dist/readmore.js"></script>
<link rel="stylesheet" href="dist/readmore.css"></script>


<input type="hidden" id='language_pref' name="language_pref" value="{{ request.session.language }}">

<style type="text/css">

html,body{
/*    font-family: -apple-system, BlinkMacSystemFont, Helvetica, Arial, "Segoe UI", Roboto, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; */
/*    font-family: BlinkMacSystemFont;*/
  -webkit-font-smoothing: antialiased;
  -moz-font-smoothing: grayscale;
  -o-font-smoothing: antialiased;
  -ms-font-smoothing: antialiased;
  font-size: 16px; 
  text-decoration: none;
  letter-spacing: normal; 
  text-align: inherit; 
  /*  line-height: 25px;*/
  /*   font-weight: 400; */ 
  /*   text-transform: none; */
  /*   color: inherit; */
  /*  line-height: 25px; 
  width: 100%;
  height: 100%; 
  display: flex;
  flex-direction: column;
}*/
}

.uppercase{
	  text-transform: uppercase;
      letter-spacing: 2.5px;
      font-weight: bold;
      line-height: 35px;
       font-family: Helvetica; 
      font-size: 12px;
}

.uppercase-btn{
    text-transform: uppercase;
    font-size: 12px;
}


html, body {
    max-width: 100%;
}

#onhover:hover {
	text-decoration: underline;
}

.hidden {
    display:none;
}

#more {
	display: none;
}

small {
	font-size: 11px;
}

@media only screen and (min-width: 768px) {
	#mobile {
		visibility: hidden;
		display: none;
	}
}

@media only screen and (max-width: 768px) {
	html, body {
    max-width: 100%;
    overflow-x: hidden;
	}

	#trigger_2 {
		margin-top: 65px;
		position: fixed;
	}

	img {
		max-width: 300px !important;
		max-height: 225px !important;
	}

	#desktop, #left-section-desktop, #right-section-desktop, #image-scroll {
		visibility: hidden;
		display: none;
	}
	
}

.avatar-pdv{
	width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 100% !important;
}



</style>

</head>



<div id="desktop" class="row" style="position: absolute; left: 50%; right: 50%; margin-top: 50px; margin-bottom: 20px;">
	<div class="col">
			{% for image in images %}
			<div class="row">
				<div class="col mb-3" style="display: flex; justify-content: center;">
					<img src="{{ image.image.url }}" style="max-width: 648px; max-height: 486px; object-fit: scale-down;" alt="...">
				</div>
			</div>
			{% endfor %}
	</div>
</div>

<div id="mobile" class='row'>
	<div class='col-12'>

    
			{% if object.images.all %}

			<div id="carouselExampleIndicators" class="carousel slide" data-interval="false" data-ride="carousel">
			<ol class="carousel-indicators">
			</ol>
			<div class="carousel-inner">

			{% for image in images %}
			 {% if image.image_order == 1 %}
				<div class="carousel-item active" class="carousel slide" data-interval="false">
				<img src="{{ image.image.url }}" alt="...">
				</div>
			{% endif %}
			{% endfor %}

			{% for image in images %}
				{% if not image.image_order == 1 %}
					<div class="carousel-item" data-interval="false">
					<img src="{{ image.image.url }}" alt="...">
					</div>
				{% endif %}
			{% endfor %}
			
			<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="sr-only">Previous</span>
			</a>
			<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="sr-only">Next</span>
			</a>
			</div>
			</div>
			{% endif %}
	</div>
</div>

<div id="left-section-desktop" class="row" style="position: fixed; margin-top: 150px; left: 3%; right: 80%;">

	<div class="col-12 lead pb-2" style='font-size: 14px;'>{{ object.title }}</div>
	<div class="col-12 uppercase" style="font-size: 12px;">Размер: S</div>
	<div class="col-12  uppercase" style='font-size: 12px;'>СОСТОЯНИЕ: </div>
	<div class="col-12 lead" style='font-size: 14px;'>{{ object.condition }}</div>
	<div class="col-12  uppercase" style='font-size: 12px;'>ОПИСАНИЕ:</div>
	<div class="col-12 lead read-more" style='font-size: 14px;'>
		{{ object.description|linebreaks }}
		
		<p class="prompt">
			<a class="button" href="#" style='font-size: 12px'>Read More</a>
		</p>

	</div>
</div>

<div id="right-section-desktop" class="row" style="position: fixed; margin-top: 150px; left: 80%; right: 3%;">

	<div class="col-9 uppercase" style="font-size: 12px;">{{ object.brand }}</div>
	<div class="col-3 " style="font-size: 12px;">{% include 'accounts/wish-list-update-detail.html' with product=object %}</div>
	<div class="col-9 pb-1" style="font-size: 16px;">${{ object.price }}</div>
<!-- 	<div class="col-6 mx-auto pb-1" style="font-size: 16px;">Размер: OS</div> -->
	<div class="col-3 pb-1" style="font-size: 14px; padding-left: 25px;">{{ likes }}</div>

		<div class="col-12 uppercase-btn">
		{% if request.user.is_authenticated and request.user == object.user %}
			{% include 'products/snippets/logged-user-update-card.html' with instance=object %}
		{% else %}
			{% include 'accounts/snippets/begin-chat.html' with btn_title='Связаться с продавцом' %} 
		{% endif %}
	</div>
	<div class="col-12 uppercase-btn my-auto">
		<div class="flip-card-2" style="width: 100%;">
	        <div class=" flip-card-2-inner">
				<div class="flip-card-2-front my-auto"><i class="far fa-check-circle fa-1x my-auto"></i><span>Оригинал</span></div>
	                <div class="flip-card-2-back">
		                <div class="row">
			            	<div class="col my-auto mr-2 ml-2"><small>Проверено {{ object.timestamp|date|to_rus_times }}</small></div>
		              	</div>
	            	</div>
	        </div>
       	</div>
	</div>
	<div class="col-12 mt-3">
		<div class="row">
			<div class="col-8 pr-0 mt-2">
				<small class="text-muted">Опубликовано {{ object.timestamp|timesince|to_rus_times }} назад</small>
			</div>
			<div class="col-2 pl-0">
				{% if object.user.profile_foto %}
					<a href='{{ object.user.get_absolute_url }}'><img  src="{{ object.user.profile_foto.url }}"  class=" avatar-pdv  ml-2" alt="..." ></a>
				{% else %}
					<a href='{{ object.user.get_absolute_url }}'><img src="{% static 'img/user_noname.png' %}" class="avatar-pdv" ></a>
				{% endif %}
			</div>
		</div>
	</div>
</div>

<div id="mobile" class="row" style="left: 50%; right: 50%;">
	<div class="col-12 lead pb-2" style='font-size: 14px; font-weight: bold;'>{{ object.title }}</div>
	<div class="col-12 lead" style='font-size: 12px;'>СОСТОЯНИЕ:</div>
	<div class="col-12 lead pb-2" style='font-size: 12px;'>Новое, с этикеткой</div>
	<div class="col-12 lead" style='font-size: 12px;'>ОПИСАНИЕ:</div>
	<div class="col-12 lead read-more" style='font-size: 12px;'>{{ object.description|linebreaks }}</div>

	<div class="col-10" style="font-size: 16px;">{{ object.brand }}</div>
	<div class="col-2" style="font-size: 14px;">{% include 'accounts/wish-list-update-detail.html' with product=object %}</div>
	<div class="col-3 pb-1" style="font-size: 16px;">${{ object.price }}</div>
	<div class="col-7 mx-auto pb-1" style="font-size: 16px;">Размер: {{ object.size }}</div>
	<div class="col-2 pb-1" style="font-size: 14px; padding-left: 25px;">{{ likes }}</div>
		<div class="col-12">
		{% if request.user.is_authenticated and request.user == object.user %}
			{% include 'products/snippets/logged-user-update-card.html' with instance=object %}
		{% else %}
			{% include 'accounts/snippets/begin-chat.html' with btn_title='Связаться с продавцом' %} 
		{% endif %}
	</div>
	<div class="col-12 uppercase-btn">
		<div class="flip-card-2" style="width: 100%;">
	        <div class=" flip-card-2-inner">
				<div class="flip-card-2-front"><i class="far fa-check-circle fa-1x"></i><div>Оригинал</div></div>
	                <div class="flip-card-2-back">
		                <div class="row">
			            	<div class="col my-auto mr-2 ml-2"><small>Проверено {{ object.timestamp|date|to_rus_times }}</small></div>
		              	</div>
	            	</div>
	        </div>
       	</div>
	</div>
	<div class="col-12 mt-3">
		<div class="row">
			<div class="col-9 pr-0 mt-2">
				<small class="text-muted">Опубликовано {{ object.timestamp|timesince|to_rus_times }} назад</small>
			</div>
			<div class="col-2 pl-0">
				{% if object.user.profile_foto %}
					<a href='{{ object.user.get_absolute_url }}'><img  src="{{ object.user.profile_foto.url }}"  class=" avatar  ml-2" alt="..." style="width:50px; height: 50px"></a>
				{% else %}
					<a href='{{ object.user.get_absolute_url }}'><img src="{% static 'img/user_noname.png' %}" class="avatar"  style="width:50px; height: 50px"></a>
				{% endif %}
			</div>
		</div>
	</div>
	<div class="col-12">
		{% include 'products/snippets/product-report.html' with product=object %} REPORT 
	</div>



</div>

</div>



<script type="text/javascript">
	var currentPath = window.location.href
	if (currentPath.indexOf("products/view") != -1) {
		$('.sticky-top').addClass('fixed-top').removeClass('sticky-top bg-white');
	}

	$(".read-more").readMore();
	$(".read-more").readMore({
		previewHeight: 20
	});
	$(".read-more").readMore({
		expandTrigger: ".prompt"
	});
	$(".read-more").readMore({
		fadeColor1: "rgba(255,255,255,0)",
		fadeColor2: "rgba(255,255,255,1)"
	});


	// function toggler(divId) {
	//     $("#" + divId).toggle();
	// }

	// $(document).ready(function () {
 //      var maxheight=50;
 //      var showText = "More";
 //      var hideText = "Less";

 //      $('#demo').each(function () {
 //        var text = $(this);
 //        if (text.height() > maxheight){
 //            text.css({ 'overflow': 'hidden','height': maxheight + 'px' });

 //            var link = $('<a href="#">' + showText + '</a>');
 //            var linkDiv = $('<div></div>');
 //            linkDiv.append(link);
 //            $(this).after(linkDiv);

 //            link.click(function (event) {
 //              event.preventDefault();
 //              if (text.height() > maxheight) {
 //                  $(this).html(showText);
 //                  text.css('height', maxheight + 'px');
 //              } else {
 //                  $(this).html(hideText);
 //                  text.css('height', 'auto');
 //              }
 //            });
 //        }       
 //      });
 //   });


</script>	

{% endblock %}