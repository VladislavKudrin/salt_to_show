{% extends "base.html" %}
{% load static %}
{% load sass_tags %}
<link href="{% sass_src 'custom_scss/custom.scss' %}" rel="stylesheet" type="text/css"/>

<link href="{% static 'css/main.css' %}" rel="stylesheet" type="text/css">

{% block content %}

<div class="container-fluid container-fluid-product">
<div class='row'>
	<div class='col-12 col-md-8 limit'>

			{% if object.images.all %}

			<div id="carouselExampleIndicators" class="carousel slide" data-interval="false" data-ride="carousel">
			<ol class="carousel-indicators">
			</ol>
			<div class="carousel-inner">

			{% with object.images.all|first as image %}
			<div class="carousel-item active" class="carousel slide" data-interval="false">
			<img src="{{ image.image.url }}" class="d-block w-100" alt="..." onerror=this.src="{% static 'img/Oops.png' %}">
			</div>
			{% endwith %}

			{% for image in object.images.all|slice:"1:" %}
			<div class="carousel-item" data-interval="false">
			<img src="{{ image.image.url }}" class="d-block w-100" alt="..." onerror=this.src="{% static 'img/Oops.png' %}">
			</div>
			{% endfor %}

			
			<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
			<span class="carousel-control-prev-icon" aria-hidden="true"></span>
			<span class="sr-only">Previous</span>
			</a>
			<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
			<span class="carousel-control-next-icon" aria-hidden="true"></span>
			<span class="sr-only">Next</span>
			</a>
			</div>
			</div>

			{% endif %}
	</div>

	
	<div class='col-12 col-md-4'>

		<div class='row'>
			<div class='col-9'>

			<h5><b>{{ object.title }}</b></h5>
			</div>
		
		<div class='col-3'>
		{% include 'accounts/wish-list-update-detail.html' with product=object %}
		</div>

		</div>

			<div class='row contact-padding'>
				<br/>
				<div class='col-12'>
			
			{% if request.user.is_authenticated and request.user == object.user %}
			{% include 'products/snippets/logged-user-update-card.html' with instance=object %}
			{% else %}
			{% include 'accounts/snippets/begin-chat.html' with btn_title='Contact seller' %} 
			{% endif %}
			






			<br/>
			<b> Description </b>
			<br/>
			<br/>
			{{ object.description|linebreaks }} <br/>
			<small class="text-muted">
				Posted {{ object.timestamp|timesince }} ago by <a class='btn btn-sm btn-outline-dark' href='{{ object.user.get_absolute_url }}'>{{ object.user.username }}</a> <br/>
			</small>
		</div>
		</div>
	</div>

</div>
</div>
{% endblock %}