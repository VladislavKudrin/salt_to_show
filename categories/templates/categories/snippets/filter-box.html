{% load for_loop_extras %}
<form method ='POST' action='{% url "products:list" %}'>{% csrf_token %}
{% if request.session.language == 'RU' %}
<a href="{% url 'products:list' %}" class='btn btn-dark mt-3'>Показать все</a>
  <hr/>
Бренд
<div class='filter-boxes'>
  {% for brand in brands %}
  <div class=" ml-3 mt-2 custom-control custom-checkbox">
    <input type="checkbox" class="custom-control-input" id="customCheckbrand{{ forloop.counter|add:'1' }}" name='{{ brand }}' value='{{ brand }}'>
    <label class="custom-control-label" for="customCheckbrand{{ forloop.counter|add:'1' }}">{{ brand|capfirst }}</label>
  </div>
{% endfor %}
</div>  
  <hr/>
Гендер
<div>
  {% for gender in fields_gender %}
    <div class=" ml-3 mt-2 custom-control custom-checkbox">
      <input type="checkbox" class="custom-control-input" id="customCheckgender{{ forloop.counter|add:'1' }}" name='{{ gender }}' value='{{ gender }}'>
      <label class="custom-control-label" for="customCheckgender{{ forloop.counter|add:'1' }}">
        {{ gender|to_rus|capfirst }}
      </label>
    </div>
  {% endfor %}
</div>
  <hr/>
Категория
<div>
  {% for category in fields_category %}
  <div class="btn-group dropright customDropRight">
      <div class=" ml-3 mt-2 custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input {{ category }}" id="customCheckcategory{{ forloop.counter|add:'1' }}" name='{{ category }}' value='{{ category }}'>
        <label class="custom-control-label" for="customCheckcategory{{ forloop.counter|add:'1' }}"> 
          {{ category|to_rus|capfirst }}
        </label>
      </div>
      <button type="button" class="btn btn-warning dropdown-toggle dropdown-toggle-split customDropright {{ category }}-btn" style='display: none; background-color: white; border: none;' data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropright</span>
      </button>
      <div class="dropdown-menu customDropRightMenu filter-boxes">
        {% for category_sizes in sizes %}
          {% for size in category_sizes %}
            {% if size.size_for == category|capfirst %}
              <div class=" ml-3 mt-2 custom-control custom-checkbox jquery-box-{{ category }}" >
              <input type="checkbox" class="custom-control-input customCheckbox{{ category }}" id="customCheck{{ category }}{{ forloop.counter|add:'1' }}" name='{{ size }}' value='{{ size }}'>
              <label class="custom-control-label" for="customCheck{{ category }}{{ forloop.counter|add:'1' }}">
              {{ size }}
              </label>
              </div>
            {% endif %}
          {% endfor %}
        {% endfor %}
      </div>
  </div>
  <br/>
  {% endfor %}
  <hr/>
</div>
  <button type="submit" class="mt-3 btn btn-dark" value="submit">ОК</button>
{% else %}
<a href="{% url 'products:list' %}" class='btn btn-dark mt-3'>All Categories</a>
  <hr/>
Brand
<div class='filter-boxes'>
  {% for brand in brands %}
  <div class=" ml-3 mt-2 custom-control custom-checkbox">
    <input type="checkbox" class="custom-control-input" id="customCheckbrand{{ forloop.counter|add:'1' }}" name='{{ brand }}' value='{{ brand }}'>
    <label class="custom-control-label" for="customCheckbrand{{ forloop.counter|add:'1' }}">{{ brand|capfirst }}</label>
  </div>
{% endfor %}
</div>  
  <hr/>
Gender
<div>
  {% for gender in fields_gender %}
    <div class=" ml-3 mt-2 custom-control custom-checkbox">
      <input type="checkbox" class="custom-control-input" id="customCheckgender{{ forloop.counter|add:'1' }}" name='{{ gender }}' value='{{ gender }}'>
      <label class="custom-control-label" for="customCheckgender{{ forloop.counter|add:'1' }}">
        {{ gender|capfirst }}
      </label>
    </div>
  {% endfor %}
</div>
  <hr/>
Category
<div>
  {% for category in fields_category %}
  <div class="btn-group dropright customDropRight">
      <div class=" ml-3 mt-2 custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input {{ category }}" id="customCheckcategory{{ forloop.counter|add:'1' }}" name='{{ category }}' value='{{ category }}'>
        <label class="custom-control-label" for="customCheckcategory{{ forloop.counter|add:'1' }}">
          {{ category|capfirst }}
        </label>
      </div>
      <button type="button" class="btn btn-warning dropdown-toggle dropdown-toggle-split customDropright {{ category }}-btn" style='display: none; background-color: white; border: none;' data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropright</span>
      </button>
      <div class="dropdown-menu customDropRightMenu filter-boxes">
        {% for category_sizes in sizes %}
          {% for size in category_sizes %}
            {% if size.size_for == category|capfirst %}
              <div class=" ml-3 mt-2 custom-control custom-checkbox jquery-box-{{ category }}" >
              <input type="checkbox" class="custom-control-input customCheckbox{{ category }}" id="customCheck{{ category }}{{ forloop.counter|add:'1' }}" name='{{ size }}' value='{{ size }}'>
              <label class="custom-control-label" for="customCheck{{ category }}{{ forloop.counter|add:'1' }}">
              {{ size }}
              </label>
              </div>
            {% endif %}
          {% endfor %}
        {% endfor %}
      </div>
  </div>
  <br/>
  {% endfor %}
  <hr/>
</div>
  <button type="submit" class="mt-3 btn btn-dark" value="submit">Filter</button>
{% endif %}
</form>







